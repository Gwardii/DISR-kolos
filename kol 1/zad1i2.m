J = [-0.0879, 0.2121, 0.2121, 0;
     0.8121, 0.8121, 0.5121, 0.3];
v = [0.5; -0.9];
err = [2; 1.5] * 1e-5;
q = [1.5708; -1.5708; -0.7854; 0.7854];
dt = 5e-3;
K = eye(2) * 1 / dt;
dphi = -100/16 * q;

J_p = pinv(J);
P = 1 - J_p * J;

dq = J_p * (v + K * err) + P * dphi
q_new = q + dq * dt

W = diag([1, 0.1736, 0.0625, 0.0625])
W_ = W ^ (-1/2)
J_pw = W_ * pinv(J * W_)
